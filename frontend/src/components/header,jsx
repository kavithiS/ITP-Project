import React, { useState, useEffect } from "react";
import { motion } from "framer-motion";
import logo from "../assets/images/logo.png";
import logo from "../assets/logo.png"; // Update with your logo path

const Header = () => {
  const [mousePosition, setMousePosition] = useState({ x: 0, y: 0 });
  const [isScrolled, setIsScrolled] = useState(false);
  const [isAuthenticated, setIsAuthenticated] = useState(false);

  useEffect(() => {
    // Check if user is authenticated
    const authToken = localStorage.getItem("authToken");
    setIsAuthenticated(!!authToken);

    // Mouse movement handler
    const handleMouseMove = (e) => {
      setMousePosition({ x: e.clientX, y: e.clientY });
    };

    // Scroll handler
    const handleScroll = () => {
      setIsScrolled(window.scrollY > 20);
    };

    window.addEventListener("mousemove", handleMouseMove);
    window.addEventListener("scroll", handleScroll);

    return () => {
      window.removeEventListener("mousemove", handleMouseMove);
      window.removeEventListener("scroll", handleScroll);
    };
  }, []);

  return (
    <>
      <motion.div
        className="fixed w-4 h-4 bg-red-500 rounded-full pointer-events-none z-50 mix-blend-difference"
        animate={{
          x: mousePosition.x - 8,
          y: mousePosition.y - 8,
          scale: 1,
          opacity: 1,
        }}
        transition={{ type: "spring", stiffness: 500, damping: 28 }}
      />
      <motion.nav
        className={`fixed w-full z-50 transition-all duration-300 ${
          isScrolled
            ? "bg-white/80 backdrop-blur-md shadow-lg"
            : "bg-transparent"
        }`}
        animate={{
          scale: isScrolled ? 0.98 : 1,
          y: isScrolled ? -10 : 0,
        }}
        transition={{ duration: 0.3 }}
      >
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex justify-between h-16">
            <div className="flex items-center">
              <motion.img
                initial={{ opacity: 0 }}
                animate={{ opacity: 1 }}
                src={logo}
                alt="REDBRICK Logo"
                className="w-[100px] h-[100px] object-contain"
              />
            </div>
            <div className="hidden md:flex items-center space-x-8">
              <a
                href="/"
                className="text-gray-800 hover:text-red-600 transition-colors"
              >
                Home
              </a>
              <a
                href="/tasks"
                className="text-gray-800 hover:text-red-600 transition-colors"
              >
                Tasks
              </a>
              <a
                href="/services"
                className="text-gray-800 hover:text-red-600 transition-colors"
              >
                Services
              </a>
              <a
                href="/contact"
                className="text-gray-800 hover:text-red-600 transition-colors"
              >
                Contact
              </a>

              {isAuthenticated ? (
                <a
                  href="/dashboard"
                  className="bg-gradient-to-r from-gray-900 to-gray-700 text-white px-6 py-2 rounded-full hover:shadow-lg transition-all"
                >
                  Dashboard
                </a>
              ) : (
                <>
                  <a
                    href="/signin"
                    className="text-gray-800 hover:text-red-600 border border-gray-300 px-5 py-2 rounded-full transition-all hover:shadow-md"
                  >
                    Sign In
                  </a>
                  <a
                    href="/signup"
                    className="bg-gradient-to-r from-red-600 to-red-500 text-white px-5 py-2 rounded-full hover:shadow-lg transition-all"
                  >
                    Sign Up
                  </a>
                </>
              )}
            </div>
          </div>
        </div>
      </motion.nav>
    </>
  );
};

export default Header;
